.row
  .col= btn_to 'Add a Recipe', [:new, :recipe]
  .col= btn_to 'Manage Sections', :sections, type: 'secondary', style: 'float-right'

- Current.cookbook.sections.by_position.each do |section|
  %br
  %br
  %h2= section.name
  - if section.recipes.any?
    .recipe-columns
      - section.recipes.bases_only.includes(:variants).abc.each do |recipe|
        .recipe-family
          .recipe-item
            = fire_if recipe.favorite? && !recipe.forgotten?
            = forgotten_if recipe.forgotten?
            = link_to recipe.name, recipe

          - recipe.variants.sort_by(&:name).each do |variant|
            .recipe-item.variant
              = fire_if variant.favorite? && !variant.forgotten?
              = forgotten_if variant.forgotten?
              = link_to variant.name, variant

- if Current.cookbook.recipes.where(section: nil).any?
  %h2 Uncategorized
  .recipe-columns
    - Current.cookbook.recipes.where(section: nil).bases_only.includes(:variants).abc.each do |recipe|
      .recipe-family
        .recipe-item
          = fire_if recipe.favorite? && !recipe.forgotten?
          = forgotten_if recipe.forgotten?
          = link_to recipe.name, recipe

        - recipe.variants.sort_by(&:name).each do |variant|
          .recipe-item.variant
            = fire_if variant.favorite? && !variant.forgotten?
            = forgotten_if variant.forgotten?
            = link_to variant.name, variant
